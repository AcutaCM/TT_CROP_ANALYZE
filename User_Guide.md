# 使用手册

适用版本：2025-08-11 之后的构建

本手册介绍如何安装运行、连接无人机、使用 AI 分析与挑战卡巡航、导出报告、个性化设置、快捷键以及常见问题排查。

目录
- 快速开始
- 连接与基本操作
- 挑战卡巡航
- AI 分析与报告导出
- 个性化设置（主题与壁纸）
- 快捷键
- 常见问题排查
- 安全与建议

## 一、快速开始

1) 准备环境
- Windows 10/11（推荐）
- Node.js v14+，Python 3.8+，网络通畅
- Tello 无人机（或兼容机型）电量 > 50%

2) 安装依赖
- Python 依赖
  - 打开终端（PowerShell/CMD），进入项目根目录
  - 创建虚拟环境并安装依赖
    - .venv\Scripts\activate
    - pip install -r requirements.txt
- Node 依赖
  - npm install
  - npm install electron --save-dev

3) 启动
- 启动 Python 后端
  - python drone_backend.py
- 启动 Electron 前端
  - npm start
- 或使用批处理脚本
  - .\restart.bat

4) 首次配置
- 在界面中打开"配置"面板，设置必要的 API Key、模型路径等信息并保存

## 二、连接与基本操作

- 连接无人机
  - 在左侧"连接控制"模块，点击"连接无人机"
  - 连接成功后，状态栏对应图标变为在线
- 起飞/降落
  - 通过"起飞""降落"按钮，或使用快捷键（见"快捷键"章节）
- 截图/全屏
  - 视频控制区可截图、全屏，截图会保存到你选择的路径

## 三、挑战卡巡航

本功能用于让无人机按自定义的卡序列自动巡航并在每张卡上停留指定时间。

1) 配置项（左侧"挑战卡巡航"面板）
- 巡航轮次：无人机重复执行完整卡序列的次数（默认 3）
- 飞行高度：巡航时的高度，单位厘米（默认 100）
- 挑战卡序列：逗号分隔的 ID 列表，如 1,6,7,3（默认 1,6）
  - 输入会自动去除空格，非数值会被忽略
- 停留时间（秒）：每张卡停留的时间（默认 3）

2) 启动与停止
- 点击"开始巡航"启动；点击"停止巡航"中止
- 启动后状态栏会显示"巡航：运行中"，日志面板会显示关键进度

3) 注意事项
- 卡序列必须为正整数，至少包含一个有效 ID
- 建议先手动测试起飞/降落，确认控制与安全范围
- 室内飞行请确保 GPS/视觉定位条件，避免误差过大

## 四、AI 分析与报告导出

1) 开始 AI 分析
- 在"AI 分析任务"模块点击"开始 AI 分析"
- 分析结果会实时显示在右侧"报告面板"中

2) 导出报告
- 点击"导出报告"按钮，或使用快捷键 Ctrl+E
- 修复后导出仅触发一次系统保存对话框（之前的"下载两个"问题已修复）
- 报告内容包含：总体统计、每个样本的详细分析、问题列表与建议

3) 清空报告
- 点击"清空报告"按钮，重置右侧报告面板

## 五、个性化设置（主题与壁纸）

### 主题切换

系统提供 6 种精心设计的主题，适应不同使用场景和个人喜好：

1) **访问主题设置**
- 点击右上角状态栏的调色板图标 🎨
- 或直接点击"切换主题"按钮

2) **可用主题**
- **深色主题**（默认）：经典深蓝科技风，适合长时间使用
- **浅色主题**：简洁明亮风格，适合白天办公环境
- **赛博朋克**：霓虹科幻风格，酷炫的紫红配色
- **自然主题**：绿色生态风格，清新自然
- **极简主题**：黑白简约风格，专注内容体验
- **日落主题**：温暖橙色调，温馨舒适

3) **操作步骤**
- 在主题选择弹窗中，点击任意主题预览卡片
- 主题会立即生效，并显示切换成功通知
- 设置会自动保存，下次启动自动恢复

### 壁纸自定义

个性化背景壁纸系统，支持预设壁纸和自定义图片：

1) **访问壁纸设置**
- 点击右上角状态栏的图片图标 🖼️
- 或直接点击"切换壁纸"按钮

2) **预设壁纸选择**
- 在"预设壁纸"标签页选择以下选项：
  - **默认渐变**：经典深色渐变背景
  - **太空星云**：深蓝色太空主题
  - **农场风景**：绿色田园风光
  - **科技电路**：蓝紫色科技感
  - **自然风光**：清新自然色彩
  - **抽象艺术**：粉色艺术渐变

3) **自定义图片上传**
- 切换到"上传图片"标签页
- 点击上传区域或拖拽文件到上传区
- 支持格式：JPG、PNG、GIF
- 限制：单张图片最大 5MB，最多上传 20 张
- 点击已上传的图片即可应用为背景
- 点击图片右上角的 ❌ 按钮可删除图片

4) **背景效果调节**
- **透明度**：调节背景透明度（10%-80%），影响背景与内容的视觉层次
- **模糊度**：调节背景模糊程度（0-20px），降低背景对内容阅读的干扰

5) **管理已上传图片**
- 已上传的图片会显示在"上传图片"标签页下方
- 当前应用的壁纸会有选中边框提示
- 删除图片后，如果是当前壁纸，会自动切换回默认渐变

6) **注意事项**
- 上传的图片存储在浏览器本地，清除浏览器数据会丢失
- 建议选择适当的透明度和模糊度，保证界面内容的可读性
- 大图片可能影响应用启动速度，建议压缩后上传

### 设置持久化

- 主题和壁纸设置会自动保存到本地存储
- 重启应用后会自动恢复上次的设置
- 如需重置，可选择默认主题和默认壁纸

## 六、快捷键

以下快捷键为默认全局快捷键（Windows）：
- Ctrl + R：重置挑战卡/QR 检测
- Ctrl + S：截图
- Ctrl + E：导出报告
- Ctrl + T：测试 AI
- F11：全屏/退出全屏
- 空格：起飞/降落（当焦点不在输入框时）

注：为避免重复触发，Ctrl+E 仅在全局处绑定，UI 层不再重复绑定。

## 七、常见问题排查

1) 页面变成"静态"、按钮无响应
- 可能原因：旧版本中挑战卡巡航方法被放在 UIManager 类外导致 JS 异常
- 处理：升级到新版本（已将方法移回类中），打开控制台确认无报错

2) 导出报告会下载两个文件
- 可能原因：快捷键 Ctrl+E 在 app.js 与 ui.js 同时绑定
- 处理：升级到新版本（已在 ui.js 移除重复绑定）

3) 无人机连接失败
- 检查无人机电量、WiFi连接、IP/端口配置
- 尝试重启无人机与应用

4) 视频卡顿
- 检查网络带宽；降低分辨率或帧率；关闭其他占网应用

5) 分析结果不稳定
- 确保光照足够、飞行高度适中；更新模型文件

6) 主题或壁纸无法正常显示
- 检查浏览器是否支持 CSS Grid 和 CSS 变量（现代浏览器均支持）
- 清除浏览器缓存并重新加载页面
- 如使用自定义壁纸出现问题，可重置为默认设置

7) 上传图片失败
- 确认图片格式为 JPG/PNG/GIF
- 检查图片大小是否超过 5MB 限制
- 确认已上传图片数量是否已达到 20 张上限

## 八、安全与建议

- 请在空旷环境中进行飞行测试并遵守当地法律法规
- 室内飞行建议设置较低高度，明确安全停止键
- 建议在每次任务前进行电量检查与控制指令自检
- 自定义壁纸建议选择适当透明度，确保重要信息可见
- 如遇界面显示异常，可尝试切换回深色主题和默认壁纸


AUTH:ZarX 2025-08-12 4:24AM
